<div class="proof-comment" style="color:#666; font-style:italic; margin:0.25em 0 0.45em 2.2em;">(*** Helper: function_on for a pasted total functional map ***)</div>
<div class="proof-comment" style="color:#666; font-style:italic; margin:0.25em 0 0.45em 2.2em;">(*** LATEX VERSION: From Theorem 18.3, the maps f and g combine to give a function h:X→Y defined piecewise on A and B (agreement on the overlap is needed to have a function). ***)</div>
<div class="pftacwrap"><span class="srcline" data-line="72863">L72863</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">A, B, Y, f and g</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72864">L72864</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hdisj</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">A</span> <a href="#notation_19">∩</a> <span class="ltree">B</span></span> <a href="#notation_5">=</a> <span class="ltree"><a href="#Empty" class="anamelink">Empty</a></span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72865">L72865</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hdomf</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_domain_subset" class="anamelink">graph_domain_subset</a></span> <span class="ltree">f</span></span> <span class="ltree">A</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72866">L72866</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hdomg</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_domain_subset" class="anamelink">graph_domain_subset</a></span> <span class="ltree">g</span></span> <span class="ltree">B</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72867">L72867</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Htotf</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#total_function_on" class="anamelink">total_function_on</a></span> <span class="ltree">f</span></span> <span class="ltree">A</span></span> <span class="ltree">Y</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72868">L72868</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Htotg</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#total_function_on" class="anamelink">total_function_on</a></span> <span class="ltree">g</span></span> <span class="ltree">B</span></span> <span class="ltree">Y</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72869">L72869</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hfunf</span>: <span class="ltree"><span class="ltree"><span class="ltree"><a href="#functional_graph" class="anamelink">functional_graph</a></span> <span class="ltree">f</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72870">L72870</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hfung</span>: <span class="ltree"><span class="ltree"><span class="ltree"><a href="#functional_graph" class="anamelink">functional_graph</a></span> <span class="ltree">g</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72871">L72871</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Hrf</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_range_subset" class="anamelink">graph_range_subset</a></span> <span class="ltree">f</span></span> <span class="ltree">Y</span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72873">L72873</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_range_subset_from_total_functional" class="anamelink">graph_range_subset_from_total_functional</a></span> <span class="ltree">A</span></span> <span class="ltree">Y</span></span> <span class="ltree">f</span></span> <span class="ltree">Hdomf</span></span> <span class="ltree">Htotf</span></span> <span class="ltree">Hfunf</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="72873">L72873</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Hrg</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_range_subset" class="anamelink">graph_range_subset</a></span> <span class="ltree">g</span></span> <span class="ltree">Y</span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72875">L72875</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_range_subset_from_total_functional" class="anamelink">graph_range_subset_from_total_functional</a></span> <span class="ltree">B</span></span> <span class="ltree">Y</span></span> <span class="ltree">g</span></span> <span class="ltree">Hdomg</span></span> <span class="ltree">Htotg</span></span> <span class="ltree">Hfung</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="72875">L72875</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Hrfg</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_range_subset" class="anamelink">graph_range_subset</a></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <a href="#notation_14">∪</a> <span class="ltree">g</span></span>)</span></span> <span class="ltree">Y</span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72877">L72877</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#graph_range_subset_binunion" class="anamelink">graph_range_subset_binunion</a></span> <span class="ltree">f</span></span> <span class="ltree">g</span></span> <span class="ltree">Y</span></span> <span class="ltree">Hrf</span></span> <span class="ltree">Hrg</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="72877">L72877</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Htotfg</span>: <span class="ltree"><span class="ltree">∀x : <span class="ltree">set</span>,  <span class="ltree"><span class="ltree"><span class="ltree">x</span>  <a href="#In_notation">∈</a>  <span class="ltree">(<span class="ltree"><span class="ltree">A</span> <a href="#notation_14">∪</a> <span class="ltree">B</span></span>)</span></span> → <span class="ltree">∃y<a href="#notation_8"> : </a><span class="ltree">set</span>,  <span class="ltree"><span class="ltree"><span class="ltree">y</span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span> <a href="#notation_2">∧</a> <span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <a href="#notation_14">∪</a> <span class="ltree">g</span></span>)</span></span></span></span></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72879">L72879</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72879">L72879</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>: <span class="ltree"><span class="ltree"><span class="ltree">x</span>  <a href="#In_notation">∈</a>  <span class="ltree">(<span class="ltree"><span class="ltree">A</span> <a href="#notation_14">∪</a> <span class="ltree">B</span></span>)</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72879">L72879</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#binunionE" class="anamelink">binunionE</a></span> <span class="ltree">A</span></span> <span class="ltree">B</span></span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span>)</span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72881">L72881</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">HxA</span>: <span class="ltree"><span class="ltree"><span class="ltree">x</span>  <a href="#In_notation">∈</a>  <span class="ltree">A</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72881">L72881</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#total_function_on_totality" class="anamelink">total_function_on_totality</a></span> <span class="ltree">f</span></span> <span class="ltree">A</span></span> <span class="ltree">Y</span></span> <span class="ltree">Htotf</span></span> <span class="ltree">x</span></span> <span class="ltree">HxA</span></span>)</span></span> to the current goal.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72882">L72882</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72883">L72883</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">y</span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span> <a href="#notation_2">∧</a> <span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree">f</span></span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72883">L72883</span><div class="witnesstac">We use <span class="ltree"><span class="ltree">y</span></span> to <span class="pftackeyword">witness</span> the existential quantifier.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72884">L72884</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree"><a href="#andI" class="anamelink">andI</a></span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72886">L72886</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#andEL" class="anamelink">andEL</a></span> <span class="ltree">(<span class="ltree"><span class="ltree">y</span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree">f</span></span>)</span></span> <span class="ltree">Hy</span></span>)</span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72887">L72887</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#binunionI1" class="anamelink">binunionI1</a></span> <span class="ltree">f</span></span> <span class="ltree">g</span></span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#andER" class="anamelink">andER</a></span> <span class="ltree">(<span class="ltree"><span class="ltree">y</span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree">f</span></span>)</span></span> <span class="ltree">Hy</span></span>)</span></span>)</span></span>.</div>
</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72888">L72888</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">HxB</span>: <span class="ltree"><span class="ltree"><span class="ltree">x</span>  <a href="#In_notation">∈</a>  <span class="ltree">B</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72888">L72888</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#total_function_on_totality" class="anamelink">total_function_on_totality</a></span> <span class="ltree">g</span></span> <span class="ltree">B</span></span> <span class="ltree">Y</span></span> <span class="ltree">Htotg</span></span> <span class="ltree">x</span></span> <span class="ltree">HxB</span></span>)</span></span> to the current goal.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72889">L72889</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72890">L72890</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">y</span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span> <a href="#notation_2">∧</a> <span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree">g</span></span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72890">L72890</span><div class="witnesstac">We use <span class="ltree"><span class="ltree">y</span></span> to <span class="pftackeyword">witness</span> the existential quantifier.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="72891">L72891</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree"><a href="#andI" class="anamelink">andI</a></span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72893">L72893</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#andEL" class="anamelink">andEL</a></span> <span class="ltree">(<span class="ltree"><span class="ltree">y</span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree">g</span></span>)</span></span> <span class="ltree">Hy</span></span>)</span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="72894">L72894</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#binunionI2" class="anamelink">binunionI2</a></span> <span class="ltree">f</span></span> <span class="ltree">g</span></span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#andER" class="anamelink">andER</a></span> <span class="ltree">(<span class="ltree"><span class="ltree">y</span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">y</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree">g</span></span>)</span></span> <span class="ltree">Hy</span></span>)</span></span>)</span></span>.</div>
</div>
</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="72894">L72894</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#function_on_from_totality_and_range" class="anamelink">function_on_from_totality_and_range</a></span> <span class="ltree">(<span class="ltree"><span class="ltree">A</span> <a href="#notation_14">∪</a> <span class="ltree">B</span></span>)</span></span> <span class="ltree">Y</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <a href="#notation_14">∪</a> <span class="ltree">g</span></span>)</span></span> <span class="ltree">Htotfg</span></span> <span class="ltree">Hrfg</span></span>)</span></span>.</div>
</div>
∎
<div class="proof-comment" style="color:#666; font-style:italic; margin:0.25em 0 0.45em 2.2em;">(*** helper: negated distances are bounded above by 0 ***)</div>
<div class="proof-comment" style="color:#666; font-style:italic; margin:0.25em 0 0.45em 2.2em;">(*** LATEX VERSION: From §20 axiom (1), distances are nonnegative, hence their negatives are ≤0. ***)</div>
<div class="pftacwrap"><span class="srcline" data-line="74824">L74824</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">X, d, x and A</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74825">L74825</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hm</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#metric_on" class="anamelink">metric_on</a></span> <span class="ltree">X</span></span> <span class="ltree">d</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74826">L74826</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">HxX</span>: <span class="ltree"><span class="ltree"><span class="ltree">x</span>  <a href="#In_notation">∈</a>  <span class="ltree">X</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74827">L74827</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">HAsub</span>: <span class="ltree"><span class="ltree"><span class="ltree">A</span>  <a href="#Subq_notation">⊆</a>  <span class="ltree">X</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74828">L74828</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">t</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74829">L74829</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Ht</span>: <span class="ltree"><span class="ltree"><span class="ltree">t</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#metric_neg_dists" class="anamelink">metric_neg_dists</a></span> <span class="ltree">X</span></span> <span class="ltree">d</span></span> <span class="ltree">x</span></span> <span class="ltree">A</span></span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74829">L74829</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><a href="#Rle" class="anamelink">Rle</a></span> <span class="ltree">t</span></span> <span class="ltree"><a href="#notation_21">0</a></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74830">L74830</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#ReplE_impred" class="anamelink">ReplE_impred</a></span> <span class="ltree">A</span></span> <span class="ltree">(<span class="ltree">λa0 : <span class="ltree">set</span> ⇒  <span class="ltree"><span class="ltree"><a href="#minus_SNo" class="anamelink">minus_SNo</a></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><a href="#apply_fun" class="anamelink">apply_fun</a></span> <span class="ltree">d</span></span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">a0</span>)</span></span>)</span></span></span>)</span></span> <span class="ltree">t</span></span> <span class="ltree">Ht</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><a href="#Rle" class="anamelink">Rle</a></span> <span class="ltree">t</span></span> <span class="ltree"><a href="#notation_21">0</a></span></span>)</span></span>)</span></span> to the current goal.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74831">L74831</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">a</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74832">L74832</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">HaA</span>: <span class="ltree"><span class="ltree"><span class="ltree">a</span>  <a href="#In_notation">∈</a>  <span class="ltree">A</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74832">L74832</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hteq</span>: <span class="ltree"><span class="ltree"><span class="ltree">t</span> <a href="#notation_5">=</a> <span class="ltree"><span class="ltree"><a href="#minus_SNo" class="anamelink">minus_SNo</a></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><a href="#apply_fun" class="anamelink">apply_fun</a></span> <span class="ltree">d</span></span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">a</span>)</span></span>)</span></span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74833">L74833</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">HaX</span>: <span class="ltree"><span class="ltree"><span class="ltree">a</span>  <a href="#In_notation">∈</a>  <span class="ltree">X</span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="74835">L74835</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">HAsub</span> <span class="ltree">a</span></span> <span class="ltree">HaA</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="74835">L74835</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Hfun</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#function_on" class="anamelink">function_on</a></span> <span class="ltree">d</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><a href="#setprod" class="anamelink">setprod</a></span> <span class="ltree">X</span></span> <span class="ltree">X</span></span>)</span></span> <span class="ltree"><a href="#R" class="anamelink">R</a></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="74837">L74837</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#metric_on_function_on" class="anamelink">metric_on_function_on</a></span> <span class="ltree">X</span></span> <span class="ltree">d</span></span> <span class="ltree">Hm</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="74837">L74837</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">HxaIn</span>: <span class="ltree"><span class="ltree"><span class="ltree">(<span class="ltree">x</span>,<span class="ltree">a</span>)</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree"><span class="ltree"><a href="#setprod" class="anamelink">setprod</a></span> <span class="ltree">X</span></span> <span class="ltree">X</span></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="74839">L74839</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#tuple_2_setprod_by_pair_Sigma" class="anamelink">tuple_2_setprod_by_pair_Sigma</a></span> <span class="ltree">X</span></span> <span class="ltree">X</span></span> <span class="ltree">x</span></span> <span class="ltree">a</span></span> <span class="ltree">HxX</span></span> <span class="ltree">HaX</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="74839">L74839</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">HdR</span>: <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#apply_fun" class="anamelink">apply_fun</a></span> <span class="ltree">d</span></span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">a</span>)</span></span>  <a href="#In_notation">∈</a>  <span class="ltree"><a href="#R" class="anamelink">R</a></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="74841">L74841</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Hfun</span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">a</span>)</span></span> <span class="ltree">HxaIn</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="74841">L74841</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Hnlt</span>: <span class="ltree"><span class="ltree"><a href="#notation_1">¬</a> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><a href="#Rlt" class="anamelink">Rlt</a></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><a href="#apply_fun" class="anamelink">apply_fun</a></span> <span class="ltree">d</span></span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">a</span>)</span></span>)</span></span> <span class="ltree"><a href="#notation_21">0</a></span></span>)</span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="74843">L74843</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#metric_on_nonneg" class="anamelink">metric_on_nonneg</a></span> <span class="ltree">X</span></span> <span class="ltree">d</span></span> <span class="ltree">x</span></span> <span class="ltree">a</span></span> <span class="ltree">Hm</span></span> <span class="ltree">HxX</span></span> <span class="ltree">HaX</span></span>)</span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="74843">L74843</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree">Hteq</span></span> (from left to right).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="74844">L74844</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><a href="#Rle_minus_nonneg" class="anamelink">Rle_minus_nonneg</a></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><a href="#apply_fun" class="anamelink">apply_fun</a></span> <span class="ltree">d</span></span> <span class="ltree">(<span class="ltree">x</span>,<span class="ltree">a</span>)</span></span>)</span></span> <span class="ltree">HdR</span></span> <span class="ltree">Hnlt</span></span>)</span></span>.</div>
</div>
∎
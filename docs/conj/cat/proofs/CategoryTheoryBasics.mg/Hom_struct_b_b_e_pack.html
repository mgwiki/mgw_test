<div class="pftacwrap"><span class="srcline" data-line="2784">L2784</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">X, Y, opX, op2X, opY, op2Y, eX, eY and f</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2785">L2785</span><div class="settac"><span class="pftackeyword">Set</span> <span class="ltree">Phi</span> to be the term <span class="ltree"><span class="ltree">λX opX op2X eX Y opY op2Y eY ⇒  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span></span></span></span> of type <span class="ltree"><span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>)</span> → <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>)</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>)</span> → <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>)</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">prop</span></span></span></span></span></span></span></span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2791">L2791</span><div class="settac"><span class="pftackeyword">Set</span> <span class="ltree">PhiX</span> to be the term <span class="ltree"><span class="ltree">λX opX op2X eX ⇒  <span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">pack_b_b_e</span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span>)</span></span> <span class="ltree">(<span class="ltree">λY' opY op2Y eY ⇒  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y'</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span>)</span></span></span></span> of type <span class="ltree"><span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>)</span> → <span class="ltree"><span class="ltree">(<span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>)</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">prop</span></span></span></span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2795">L2795</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">pack_b_b_e</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span>)</span></span> <span class="ltree">PhiX</span></span> = <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2797">L2797</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">L1</span>: <span class="ltree"><span class="ltree">∀opX op2X : <span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>,  <span class="ltree">∀opY' : <span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>,  <span class="ltree"><span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">Y</span>,  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span></span></span>)</span> → <span class="ltree">∀op2Y' : <span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>,  <span class="ltree"><span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">Y</span>,  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span></span></span>)</span> → <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY'</span></span> <span class="ltree">op2Y'</span></span> <span class="ltree">eY</span></span> = <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span></span></span></span></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2802">L2802</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">opX and op2X</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2802">L2802</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">opY'</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2803">L2803</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">HopY'</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2803">L2803</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">op2Y'</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2804">L2804</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hop2Y'</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2804">L2804</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">prop_ext_2</span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2806">L2806</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2806">L2806</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">and4E</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span>)</span></span> <span class="ltree">H</span></span></span> to the current goal.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2807">L2807</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H1 H2 H3 H4</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2808">L2808</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Lf</span>: <span class="ltree"><span class="ltree">∀x<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2810">L2810</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2810">L2810</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">ap_Pi</span> <span class="ltree">X</span></span> <span class="ltree">(<span class="ltree">λ_ ⇒  <span class="ltree">Y</span></span>)</span></span> <span class="ltree">f</span></span> <span class="ltree">x</span></span> <span class="ltree">H1</span></span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="2810">L2810</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2814">L2814</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">and4I</span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2816">L2816</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H1</span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2817">L2817</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2817">L2817</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2817">L2817</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2817">L2817</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2817">L2817</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">HopY'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span>)</span></span></span> (from left to right).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2817">L2817</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H2</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2819">L2819</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2819">L2819</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2819">L2819</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2819">L2819</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2819">L2819</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Hop2Y'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span>)</span></span></span> (from left to right).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2819">L2819</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H3</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2821">L2821</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H4</span></span>.</div>
</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2822">L2822</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2822">L2822</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">and4E</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span>)</span></span> <span class="ltree">H</span></span></span> to the current goal.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2823">L2823</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H1 H2 H3 H4</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2824">L2824</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">Lf</span>: <span class="ltree"><span class="ltree">∀x<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>  <a href="#In_notation">∈</a>  <span class="ltree">Y</span></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2826">L2826</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2826">L2826</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">ap_Pi</span> <span class="ltree">X</span></span> <span class="ltree">(<span class="ltree">λ_ ⇒  <span class="ltree">Y</span></span>)</span></span> <span class="ltree">f</span></span> <span class="ltree">x</span></span> <span class="ltree">H1</span></span></span>.</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="2826">L2826</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2830">L2830</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">and4I</span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2832">L2832</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H1</span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2833">L2833</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2833">L2833</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2833">L2833</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2833">L2833</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2833">L2833</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">HopY'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span>)</span></span></span> (from right to left).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2833">L2833</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H2</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2835">L2835</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2835">L2835</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2835">L2835</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2835">L2835</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2835">L2835</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Hop2Y'</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">Lf</span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span>)</span></span></span> (from right to left).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2835">L2835</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H3</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2837">L2837</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H4</span></span>.</div>
</div>
</div>
</div>
</div><div class="pftacwrap"><span class="srcline" data-line="2838">L2838</span><div class="claimtac">We prove the intermediate <span class="pftackeyword">claim</span> <span class="ltree">L2</span>: <span class="ltree"><span class="ltree">∀opX' : <span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>,  <span class="ltree"><span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opX'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span></span></span>)</span> → <span class="ltree">∀op2X' : <span class="ltree"><span class="ltree">set</span> → <span class="ltree"><span class="ltree">set</span> → <span class="ltree">set</span></span></span>,  <span class="ltree"><span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2X'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span></span></span>)</span> → <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">PhiX</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span> = <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">PhiX</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span></span></span></span></span></span></span>.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2842">L2842</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">opX'</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2842">L2842</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">HopX'</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2842">L2842</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">op2X'</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2843">L2843</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hop2X'</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2843">L2843</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">PhiX</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span> = <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">PhiX</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2844">L2844</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">pack_b_b_e</span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span>)</span></span> <span class="ltree">(<span class="ltree">λY' opY op2Y eY ⇒  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y'</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">pack_b_b_e</span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span>)</span></span> <span class="ltree">(<span class="ltree">λY' opY op2Y eY ⇒  <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y'</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span>)</span></span></span>.</div>
</div>
<div>Use transitivity with <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span>,  and <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span>.</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2851">L2851</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">pack_b_b_e</span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2852">L2852</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o_eq</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span>)</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">L1</span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span>)</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2854">L2854</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX'</span></span> <span class="ltree">op2X'</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span> = <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2855">L2855</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">prop_ext_2</span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2857">L2857</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2857">L2857</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">and4E</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span>)</span></span> <span class="ltree">H</span></span></span> to the current goal.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2858">L2858</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H1 H2 H3 H4</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2859">L2859</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2863">L2863</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">and4I</span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2865">L2865</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H1</span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2866">L2866</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2866">L2866</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2866">L2866</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2866">L2866</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2866">L2866</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">HopX'</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span> (from left to right).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2866">L2866</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H2</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2868">L2868</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2868">L2868</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2868">L2868</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2868">L2868</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2868">L2868</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Hop2X'</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span> (from left to right).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2868">L2868</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H3</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2870">L2870</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H4</span></span>.</div>
</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2871">L2871</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2871">L2871</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">and4E</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span>)</span></span> <span class="ltree">H</span></span></span> to the current goal.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2872">L2872</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">H1 H2 H3 H4</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2873">L2873</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">f</span>  <a href="#In_notation">∈</a>  <span class="ltree"><span class="ltree">Y</span><sup><span class="ltree">X</span></sup></span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">opX'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">opY</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree">(<span class="ltree">∀x y<a href="#In_notation"> ∈ </a><span class="ltree">X</span>,  <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">op2X'</span> <span class="ltree">x</span></span> <span class="ltree">y</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree">op2Y</span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">x</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree">f</span> <span class="ltree">y</span></span>)</span></span></span></span>)</span></span> ∧ <span class="ltree"><span class="ltree"><span class="ltree">f</span> <span class="ltree">eX</span></span> = <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2877">L2877</span><div class="applytac"><span class="pftackeyword">Apply</span> <span class="ltree"><span class="ltree">and4I</span></span> to the current goal.</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2879">L2879</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H1</span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2880">L2880</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2880">L2880</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2880">L2880</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2880">L2880</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2880">L2880</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">HopX'</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span> (from right to left).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2880">L2880</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H2</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2882">L2882</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">x</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2882">L2882</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hx</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2882">L2882</span><div class="lettac"><span class="pftackeyword">Let</span> <span class="ltree">y</span> be given.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2882">L2882</span><div class="assumetac"><span class="pftackeyword">Assume</span> <span class="ltree">Hy</span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2882">L2882</span><div class="rewritetac"><span class="pftackeyword">rewrite</span> the current goal using <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Hop2X'</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span> (from right to left).</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2882">L2882</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">H3</span> <span class="ltree">x</span></span> <span class="ltree">Hx</span></span> <span class="ltree">y</span></span> <span class="ltree">Hy</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2884">L2884</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree">H4</span></span>.</div>
</div>
</div>
</div>
</div>
<div class="subproof"><div>Use symmetry.</div>
<div class="pftacwrap"><span class="srcline" data-line="2885">L2885</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o_eq</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span>)</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">L1</span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span>)</span></span></span>.</div>
</div>
</div>
</div><div>Use transitivity with  and <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">PhiX</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span>.</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2889">L2889</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o_eq</span> <span class="ltree">PhiX</span></span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">L2</span></span></span>.</div>
</div>
</div>
<div class="subproof"><div class="pftacwrap"><span class="srcline" data-line="2890">L2890</span><div class="provetac">We will <span class="pftackeyword">prove</span> <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">pack_b_b_e</span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span>)</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span>)</span></span> = <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span></span>.</div>
</div>
<div class="pftacwrap"><span class="srcline" data-line="2891">L2891</span><div class="exact">An <span class="pftackeyword">exact</span> proof term for the current goal is <span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">unpack_b_b_e_o_eq</span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree"><span class="ltree">Phi</span> <span class="ltree">X</span></span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span> <span class="ltree">eX</span></span>)</span></span> <span class="ltree">Y</span></span> <span class="ltree">opY</span></span> <span class="ltree">op2Y</span></span> <span class="ltree">eY</span></span> <span class="ltree">(<span class="ltree"><span class="ltree"><span class="ltree">L1</span> <span class="ltree">opX</span></span> <span class="ltree">op2X</span></span>)</span></span></span>.</div>
</div>
</div>
∎